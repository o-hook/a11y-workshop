<section aria-label="Special offer" class="teaser">
  <div class="teaser__wrapper">
    <div class="teaser__image">
      <img
        src="./assets/img/teaser_shoe-01.png"
        alt="Sideshot of Mike Air Force ONE in middle grey with a white sole"
      />
    </div>
    <article class="teaser__content">
      <h1 class="teaser__heading" id="heading-air-force-one">Mike Air Huarache - Special Edition</h1>
      <p class="teaser__text">
        The legendary must have shoe in a limited special edition. Get it now for the best price!
      </p>
      <div class="teaser__sizes">
        <fieldset>
          <legend class="teaser__sizes-heading" id="heading-sizes">Choose size:</legend>
        </fieldset>
        <div class="teaser__sizes-group" role="group" aria-describedby="heading-sizes">
          <input type="radio" id="size-36" name="size" value="36" />
          <label for="size-36">36</label>
          <input type="radio" id="size-37" name="size" value="37" />
          <label for="size-37">37</label>
          <input type="radio" id="size-38" name="size" value="38" />
          <label for="size-38">38</label>
          <input type="radio" id="size-39" name="size" value="39" aria-disabled="true" />
          <label for="size-39">39 <span class="-sr-only">not available</span></label>
          <input type="radio" id="size-40" name="size" value="40" />
          <label for="size-40">40</label>
          <input type="radio" id="size-41" name="size" value="41" />
          <label for="size-41">41</label>
        </div>
      </div>
      <div class="teaser__price">
        <div class="teaser__price-new" id="price-new"><span class="-sr-only">Reduced price: </span>99.- €</div>
        <s class="teaser__price-old"><span class="-sr-only">Original price: </span>159.- €</s>
      </div>
      <div>
        <button type="button" class="button" aria-describedby="heading-air-force-one price-new">Add to cart</button>
        <p role="status" id="cart-hint" class="-sr-only"></p>
      </div>
    </article>
  </div>
</section>
<script>
  const cartButton = document.querySelector(".teaser .button");
  const radioButtons = document.querySelectorAll('.teaser input[type="radio"]');
  const cartHint = document.getElementById("cart-hint");

  radioButtons.forEach((radioButton) => {
    radioButton.addEventListener("change", (event) => {
      const selectedSize = event.target.value;
      const isSizeAvailable = event.target.getAttribute("aria-disabled") !== "true";

      if (isSizeAvailable) {
        cartButton.removeAttribute("aria-disabled");
        cartButton.setAttribute("aria-describedby", "heading-air-force-one price-new");
        cartButton.removeAttribute("aria-label");
      } else {
        cartButton.setAttribute("aria-disabled", "true");
        cartButton.removeAttribute("aria-describedby");
        cartButton.setAttribute("aria-label", "Size " + selectedSize + " not available. Please choose another size.");
      }
    });
  });

  cartButton.addEventListener("click", () => {
    const selectedSize = () => {
      const checkedRadioButton = document.querySelector('.teaser input[type="radio"]:checked');
      return checkedRadioButton ? checkedRadioButton.value : false;
    };

    const clearCartHint = () => {
      setTimeout(() => {
        cartHint.textContent = "";
      }, 3000);
    };

    if (selectedSize() === false) {
      cartHint.textContent = "Please select a size before adding to cart.";
      clearCartHint();
    } else if (cartButton.getAttribute("aria-disabled") === "true") {
      cartHint.textContent = "Size " + selectedSize() + " not available. Please choose another size.";
      clearCartHint();
    } else {
      cartHint.textContent = "Mike Air Huarache in size " + selectedSize() + ", added to cart";
      clearCartHint();
    }
  });
</script>
